# Questions on Handling Climate Data P and PE in Holos Model  

One possible sources of the discrepancy between PyHolos and Holos estimations may be related to the usage of climate data. The technical report provides unclear and somewhat contradictory descriptions of how and what climate data is used.

## General information

In Holos' techincal report (Page 28):  

- _"Holos will download location-specific historic daily weather dataset from https://power.larc.nasa.gov/data-access-viewer/ if an internet connection is available."_

- _"If the internet cannot be accessed, Holos will fall back on internally stored monthly climate normals (average of the period 1980 – 2010) for temperature, precipitation and evapotranspiration that are specific to the SLC polygon the user has selected."_ 

Based on above information, we assume the default dataset of is [climateNorms_by_poly_1980_2010.csv](https://github.com/holos-aafc/Holos/blob/main/H.Content/Resources/climateNorms_by_poly_1980_2010.csv).

## Using NASA POWER Climate data for nitrous oxide emissions  

The report mentioned how and where the NASA POWER climate data is used (**section 1.6.2 Required Input Parameters** Page 22).  

  - Selecting the specific farm location also allows Holos (as a default) to download a location-specific historic daily weather dataset from https://power.larc.nasa.gov/data-access-viewer/.

  - These climate data are required for the ICBM (detailed in section 2.1), the IPCC Tier 2 carbon model (section 2.2), the calculation of nitrous oxide emissions (**section 2.5**, 2.6, and 2.7), and the estimation of emissions from livestock and their ammonia volatilization losses (section 3 and 4).

  - And in [Holos_4_Training_Guide.md](https://github.com/holos-aafc/Holos/blob/afb61d2fe38e62a818c8b5932d308497da12a5da/H.Content/Documentation/Training/Holos_4_Training_Guide.md), it suggest "_Holos will use daily precipitation, temperature, and potential evapotranspiration values to model soil carbon change (climate parameter), **nitrous oxide emissions**, as well as ammonia volatilization._"

Based on this general information, it seems suggest that in **Section 2.5** (ie, N2O emission calculation), Holos uses NASA POWER data.

## Using ecodistrict average for P and PE  
   
According to the technical report, Eq 2.5.1-1&2 suggest the P (precipitation) and PE (evapotranspiration) values used are specific for ecodistrict.

$$
EF\\\_CT_{i,P>PE} = \exp^{0.00558 \times P_{i} - 7.7} \quad \text{(2.5.1-1)}
$$

$$
EF\\\_CT_{i,P\leqslant PE} = \exp^{0.00558 \times PE_{i} - 7.7} \quad \text{(2.5.1-2)}
$$

- $P_i$: Annual growing season precipitation (May – October), in **ecodistrict** “i” (mm)
- $PE$: Growing season potential evapotranspiration, by **ecodistrict** (May – October) (mm)

Based on above evidence, the climate data used for N2O emission calculation in section 2.5 should be the default values for ecodistrict rather than point (farm-location) specific from NASA POWER. 

## Our solution

Above information seems contradict to each other. **Yet, we lack domain knowledge for these calculations, e.g., the rationale of using ecodistrict P and PE in N2O emission factor calculation rather than farm-specific P and PE.** We now use both:

(1) default inputs (by ecodistrict) (achieved by using `Farmer Mode` with `default` data source), and 

(2) point-specific P and PE of previous growing season from NASA POWER for calculation (achieved by using `Farmer Mode` with `external` data source). 

However, even we used Holos default with this dataset [climateNorms_by_poly_1980_2010.csv](https://github.com/holos-aafc/Holos/blob/main/H.Content/Resources/climateNorms_by_poly_1980_2010.csv), we still cannot replicates the calculation results generated by Holos software. It is necessary to confirm with the Holos team how they retrieve these climate parameters for calculation for **Section 2.5**.


