<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>LiteFarm Project Proposal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="proposal_files/libs/clipboard/clipboard.min.js"></script>
<script src="proposal_files/libs/quarto-html/quarto.js"></script>
<script src="proposal_files/libs/quarto-html/popper.min.js"></script>
<script src="proposal_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="proposal_files/libs/quarto-html/anchor.min.js"></script>
<link href="proposal_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="proposal_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="proposal_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="proposal_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="proposal_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">LiteFarm Project Proposal</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Authors: He Ma, Hanchang Qin, Yi Han</p>
<p>Project Mentor: Simon Goring</p>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>The project aims to refine and enhance existing GHG modeling for the LiteFarm platform, specifically focusing on nitrous oxide (<span class="math inline">\(N_2O\)</span>) emissions. The project has two main objectives. First, the initiative aims to improve existing modeling framework to incorporate dynamic global data for greater accuracy and broader applicability. Second, the project will conduct sensitivity analysis to identify influential factors on emissions estimation to guide targeted data collection. Deliverables will feature an updated dashboard for visualizing emissions and a Python script for automated data integration and GHG calculation. The broader goal is to provide actionable insights for stakeholders, aiding decision-making in sustainable agricultural practices.</p>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">1. Introduction</h2>
<p>Climate change poses a critical challenge to the sustainability of our planet, largely due to rising greenhouse gas (GHG) emissions. Agriculture is a major contributor, with activities such as livestock rearing, fertilizer use, and land management practices contributing heavily to GHG emissions. Quantifying agricultural GHG emissions can help optimize farming practices from crop selection to tillage methods, thereby reducing emissions. Our broader objective is to empower stakeholders, including farmers, researchers, and policymakers to make data-driven decisions, transforming sustainability into a measurable and actionable goal.</p>
<p>This project focuses on a potent greenhouse gas, nitrous oxide (<span class="math inline">\(N_2O\)</span>); and we propose to refine the broad problem into two objectives: (1) enhance the existing GHG emissions modeling framework by integrating comprehensive global data; and (2) conduct sensitivity analyses to determine how changes in input parameters affect GHG emission estimates</p>
<section id="enhanced-modeling" class="level3">
<h3 class="anchored" data-anchor-id="enhanced-modeling">1.1 Enhanced Modeling</h3>
<p>The agricultural GHG model HOLOS uses static model parameters from a Canadian context. Enhanced modeling will incorporate dynamic datasets that reflect global soil, climate, and crop characteristics. Our model aims to be more robust and adaptable to global agricultural practices.</p>
</section>
<section id="sensitivity-analysis" class="level3">
<h3 class="anchored" data-anchor-id="sensitivity-analysis">1.2 Sensitivity Analysis</h3>
<p>Sensitivity analysis will pinpoint the most significant factors influencing emissions. Gaining insights from these analyses can help refine our data gathering methods, improving both the accuracy and dependability of our models. It is worth noting that future analysis plans to expand to carbon dioxide (<span class="math inline">\(CO_2\)</span>) and methane (<span class="math inline">\(CH_4\)</span>) as more data become available from our partner.</p>
</section>
<section id="deliverables" class="level3">
<h3 class="anchored" data-anchor-id="deliverables">1.3 Deliverables</h3>
<p>Our project will deliver a comprehensive data product suite tailored for the LiteFarm platform.</p>
<ul>
<li>An updated module in the LiteFarm dashboard that allows users to calculate and visualize GHG emissions under various farming scenarios. This feature will support decision-making processes by providing actionable insights to the users.</li>
<li>A Python script that calculates GHG emissions with our updated GHG modeling framework. The script includes a data pipeline that automates the collection, processing, and/or integration of various data sources into the LiteFarm system. The script not only performs precise GHG calculations but also ensures the data used is consistently up-to-date and relevant.</li>
<li>Comprehensive documentation and user guides articulating the functionalities of the new features, including methodologies and data sources used in the GHG models and instructions for utilizing the dashboard.</li>
</ul>
<p>By delivering these components, our project will provide LiteFarm and its users with a tool to address the pressing issue of GHG emissions in agriculture, thereby contributing to the global effort to combat climate change.</p>
</section>
</section>
<section id="data-science-techniques" class="level2">
<h2 class="anchored" data-anchor-id="data-science-techniques">2. Data Science Techniques</h2>
<section id="data-description" class="level3">
<h3 class="anchored" data-anchor-id="data-description">2.1 Data description</h3>
<p>The GHG modeling framework employed by LiteFarm is derived from the Holos project [1], an open source software developed for estimating GHG emissions in Canadian farming systems. This model requires 22 distinct parameters for estimating <span class="math inline">\(N_2O\)</span> emissions, including farm-specific, crop-specific, and climatic and soil parameters as detailed in Appendix Table A1.</p>
<p>To enhance the existing modeling framework, we have identified three key data sources:</p>
<p>First, farm data collected by the LiteFarm team covers 124 farms throughout Canada, providing details such as geographic locations, farm sizes, type of crop planted, and estimated yield (Fig.1 and Appendix Table A1).</p>
<img src="../../img/Canada_Farm_Map.png" class="img-fluid"><br>

<h4 class="anchored">
<center>
Fig 1. The 124 farms in Canada from the LiteFarm database.
</center>
</h4>
<p>Second, based on farms’ geographic locations, we will integrate high-quality soil and climate parameters from external databases (identified in Fig. 2).</p>
<img src="../../img/fig_2.png" class="img-fluid">
<h4 class="anchored">
<center>
Fig 2. The external data sources.
</center>
</h4>
<p>Third, the Holos frame limits crop-specific parameters to a limited set of crop types, excluding many crop varieties found in LiteFarm data. These parameters are also static and lack specified ranges, limiting our ability to assess their variability. To address these limitations, we plan to expand and refine the crop-specific parameters using data from peer-reviewed articles and government reports.</p>
<section id="data-management-plan" class="level4">
<h4 class="anchored" data-anchor-id="data-management-plan">Data Management Plan</h4>
<ul>
<li>Climate Data: Scripts will be provided to automate NASA POWER Project API calls and data download.</li>
<li>Soil data: Due to their large size, scripts for downloading and setting up these datasets will be provided.</li>
<li>Crop Data: Data will be stored directly in the repository in CSV format.</li>
</ul>
</section>
</section>
<section id="method-and-techniques" class="level3">
<h3 class="anchored" data-anchor-id="method-and-techniques">2.2 Method and techniques</h3>
<p>The project aims to enhance the LiteFarm dashboard by integrating a GHG emission (nitrous oxide from crop residual nitrogen) estimation feature. Our initial task is to develop a Python script replicating the Holos model to serve as a baseline. This model will retrieve farm data from the LiteFarm database. Next, we will enhance the model to support multiple input variables. Data from external sources will be retrieved through API calls. In parallel, we will conduct sensitivity analyses to identify key drivers of GHG emission changes across different conditions.</p>
<p>The dashboard will be updated with a Farmer tab and a Scientist tab. The Farmer tab displays GHG emission data for selected farms, and the Scientist tab provides sensitivity analysis results, highlighting influential factors for emissions estimates.</p>
</section>
<section id="partners-expectation" class="level3">
<h3 class="anchored" data-anchor-id="partners-expectation">2.3 Partner’s expectation:</h3>
<p>LiteFarm expects the setup of an emission tab on the dashboard to showcase emission data for crop residual nitrogen direct emissions of selected farms. A successful outcome would include validating LiteFarm’s GHG model against the Holos desktop version to ensure that the estimations are reasonable and reliable.</p>
</section>
<section id="success-criteria" class="level3">
<h3 class="anchored" data-anchor-id="success-criteria">2.4 Success criteria</h3>
<p>To meet partner’s expectation, we have set the following success criteria:</p>
<ol type="1">
<li>Precision in GHG Estimation: A more precise GHG estimation will be assessed by comparing GHG estimates against those produced by Holos software.</li>
<li>Flexibility in Input Handling: Success will be evaluated by the system’s ability to accept a range of input variables, thereby providing more flexible and practical calculations for users.</li>
<li>Uncertainty Measurement: Providing outputs with uncertainty measurements from the sensitivity analysis will help users understand the reliability of the GHG estimates and make informed decisions.</li>
<li>Dashboard Enhancement: The effective establishment of Farmer and Scientist tabs within the LiteFarm dashboard will facilitate communication by showcasing GHG estimation results and insights from sensitivity analysis.</li>
</ol>
<div style="page-break-after: always;">

</div>
</section>
</section>
<section id="timeline" class="level2">
<h2 class="anchored" data-anchor-id="timeline">3. Timeline</h2>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 66%">
</colgroup>
<thead>
<tr class="header">
<th>Date</th>
<th>Milestone</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Week 1: 29 April - 5 May</td>
<td>- Define project questions / objectives<br>- Initial EDA<br>- Explore external data</td>
</tr>
<tr class="even">
<td>Week 2: 6th - 12th May</td>
<td>- Establish GHG model<br>- Project Proposal</td>
</tr>
<tr class="odd">
<td>Week 3: 13th - 19th May</td>
<td>- Refine GHG model<br>- Conduct sensitivity analysis</td>
</tr>
<tr class="even">
<td>Week 4: 20th - 26th May</td>
<td>- Sensitivity analysis:<br>- Integrate external data<br>- Pinpoint key variables</td>
</tr>
<tr class="odd">
<td>Week 5: 27th May - 2 June</td>
<td>- Set up initial dashboard version</td>
</tr>
<tr class="even">
<td>Week 6: 3rd - 9th June</td>
<td>- Refine dashboard</td>
</tr>
<tr class="odd">
<td>Week 7: 10th - 16th June</td>
<td>- Capstone presentation<br>- Draft final report</td>
</tr>
<tr class="even">
<td>Week 8: 17th - 23rd June</td>
<td>- Finalize dashboard<br>- Complete final report</td>
</tr>
</tbody>
</table>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">4. References</h2>
<p>[1] Minister of Agriculture &amp; Agri-Food Canada. (2022). Holos [Computer software]. GitHub. https://github.com/holos-aafc/Holos</p>
<div style="page-break-after: always;">

</div>
</section>
<section id="appendix" class="level2">
<h2 class="anchored" data-anchor-id="appendix">5. Appendix</h2>
<p>Table A1: Input requirements for Holos GHG model</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Parameters</th>
<th>Explanation</th>
<th>Type</th>
<th>Data source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Farm</td>
<td>A unique identifier, each represents a specific farm</td>
<td>Farm-specific</td>
<td>LiteFarm</td>
</tr>
<tr class="even">
<td>Crop common name</td>
<td>Text, common names of the crop grown by the farm, e.g., soybeans, wheat, and etc.</td>
<td>Farm-specific</td>
<td>LiteFarm</td>
</tr>
<tr class="odd">
<td>Total area (ha)</td>
<td>Numerical, total area of the farm</td>
<td>Farm-specific</td>
<td>LiteFarm</td>
</tr>
<tr class="even">
<td>Estimated yield (kg / ha)</td>
<td>Numerical, the estimated yield</td>
<td>Farm-specific</td>
<td>LiteFarm</td>
</tr>
<tr class="odd">
<td>Lifecycle</td>
<td>Binary, perennial or annual</td>
<td>Farm-specific</td>
<td>LiteFarm</td>
</tr>
<tr class="even">
<td>Province</td>
<td>Required by existing Holos framework</td>
<td>Farm-specific</td>
<td>Team extracted</td>
</tr>
<tr class="odd">
<td>Moisture (%)</td>
<td>Moisture content of product</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>N_p</td>
<td>N concentration in the product (kg kg-1)</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>N_s</td>
<td>N concentration in the straw (kg kg-1)</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>R_s</td>
<td>Relative biomass allocation coefficient for straw</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>R_p</td>
<td>Relative biomass allocation coefficient for product</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>N_r</td>
<td>N concentration in the roots (kg kg-1)</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>N_e</td>
<td>N concentration in the extra root material (kg kg-1) (until known from literature, the same N concentration used for roots will be utilized)</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>R_r</td>
<td>Relative biomass allocation coefficient for roots</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>R_e</td>
<td>Relative biomass allocation coefficient for extra-root material</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>RF_CS</td>
<td>Reduction factor for Cropping System</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>RF_NS</td>
<td>N source modifier RF_NSk (SN = Synthetic Nitrogen; ON = Organic Nitrogen; CRN = Crop Residue Nitrogen)</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>RF_AM</td>
<td>Reduction factor based on application method, only applicable to calculations of EF specific for SN</td>
<td>Crop-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>P_i</td>
<td>Annual growing season precipitation (May – October), in ecodistrict “i” (mm)</td>
<td>Climate-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>PE</td>
<td>Growing season potential evapotranspiration, by ecodistrict (May – October)</td>
<td>Climate-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>FR_Topo</td>
<td>FR_topo_i: Fraction of land occupied by lower portions of landscape</td>
<td>Soil-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="even">
<td>RF_TX</td>
<td>RF_TX i/j/i,j weighted modifier which provides a correction of the EF_Topo in ecodistrict ‘‘i’’ based on the soil texture</td>
<td>Soil-related</td>
<td>Holos default/External information</td>
</tr>
<tr class="odd">
<td>RF_till</td>
<td>Tillage modifier RF_Till (Conservation or Conventional Tillage)</td>
<td>Soil-crop-related</td>
<td>Holos default/External information</td>
</tr>
</tbody>
</table>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>